print((lambda l:((lambda f,x,l:f(f,x,l))(lambda f,x,l:sum(int(i[0])*(1+f(f,x+[i[2:]],l))for i in l[x[-1]]if i[2:]not in x)if x[-1]in l else 0,['shiny gold'],l), (lambda f,x,l:f(f,x,l))(lambda f,x,l:sum(f(f,[i],l)for i in l)-1if not x else(1 if x[-1]=='shiny gold'else(max(f(f,x+[i[2:]],l)for i in l[x[-1]]if i[2:]not in x)if x[-1]in l else 0)),[],l)))({a:b for a,*b in[[k[:-4].strip()for k in i[:-2].replace(' contain',',').split(',')]for i in open('input.txt')if not "other" in i]}))