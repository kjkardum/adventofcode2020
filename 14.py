print(*(lambda l:[sum((lambda l,p,*x:[[p.update((lambda i,m,o,o2,*a:[[[(lambda k,i,g,h,a,l,p:(lambda g:[p.update({g[0]:g[1]}),p.update({(lambda f,*a:f(f,*a))(lambda t,j,g,v:v if j>=len(g.keys())else t(t,j+1,g,(v&~(1<<list(g.keys())[j]))|((list(g.values())[j]<<list(g.keys())[j])&(1<<list(g.keys())[j]))),0,{k:int(bin(b)[2:].zfill(len(h))[i]) for i,k in enumerate(h)},g[0]):g[1] for b in range(2**len(h))})])([[(lambda f,*a:f(f,*a))(lambda t,j,g,v:v if j>=len(g.keys())else t(t,j+1,g,(v&~(1<<list(g.keys())[j]))|((list(g.values())[j]<<list(g.keys())[j])&(1<<list(g.keys())[j]))),0,g,int(i[0][4:-2])),int(i[1])] for i in[k.split('= ')]][0] if a else[[int(i[0][4:-2]),(lambda f,*a:f(f,*a))(lambda t,j,g,v:v if j>=len(g.keys())else t(t,j+1,g,(v&~(1<<list(g.keys())[j]))|((list(g.values())[j]<<list(g.keys())[j])&(1<<list(g.keys())[j]))),0,g,int(i[1]))] for i in[k.split('= ')]][0]))(k,i,{35-ii:int(j)for ii,j in enumerate(i)if j in o},[35-ii for ii,j in enumerate(i)if j in o2],*a) for k in m]]+[a[-1]]][0][1])(i,m,*x,l,{})) for i,*m in l]]+[p.values()])(l,{},*x)[1]) for x in [['10','',0],['1','X',1]]])([i.split("\n")[:-1] for i in open('input.txt').read().split('mask = ')][1:]))
